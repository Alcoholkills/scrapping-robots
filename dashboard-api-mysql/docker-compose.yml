version: '3.6'
services:
  php-nginx-dashboard:
    image: 'wallseven/nginx-php-scraping:latest'
    container_name: nginx-php-container-dashboard
    volumes:
      - './pages/dashboard:/var/www/html:rw'
      - './conf/nginx.conf:/etc/nginx/nginx.conf'
#     - './docker/php.ini:/etc/php.ini'
    command: bash -c "cd var/www/html && composer install"
    ports:
      - '8000:80'
  mysql:
    image: 'hypriot/rpi-mysql:latest'
    container_name: mysql-container
    environment:
      MYSQL_DATABASE: 'scrapping'
      MYSQL_PASSWORD: 'scrapping'
      MYSQL_ROOT_PASSWORD: 'scrapping'
      MYSQL_USER: 'scrapping'
    volumes:
    - './conf/docker-mysql.cnf:/etc/mysql/conf.d/docker-mysql.cnf:rw'
    - './mysql/data:/var/lib/mysql:rw'
  php-nginx-api:
    image: 'wallseven/nginx-php-scraping:latest'
    container_name: nginx-php-container-api
    volumes:
      - './pages/symfony-rest-api:/var/www/html'
      - './conf/nginx.conf:/etc/nginx/nginx.conf:rw'
#     - './docker/php.ini:/etc/php.ini'
    command: bash -c "cd var/www/html && composer install"
    ports:
    - '8080:80'
   
 
